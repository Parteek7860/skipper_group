@using System.Data
@model skipper_group_new.Models.clsReview
@{
    ViewBag.Title = "Add Review";
    Layout = "~/Views/Shared/_homepage.cshtml";
}
<div class="block-header">
    <div class="row">
        <div class="col-lg-7 col-md-6 col-sm-12">
            <h2>
                @ViewBag.Title
                <small class="text-muted">@Context.Session.GetString("ClientName")</small>
            </h2>
        </div>
        <div class="col-lg-5 col-md-6 col-sm-12">
            <ul class="breadcrumb float-md-right">
                <li class="breadcrumb-item"><a href="#"><i class="zmdi zmdi-home"></i> Product Review</a></li>
                <li class="breadcrumb-item active">Add Review</li>
            </ul>
        </div>
    </div>
</div>
<style>
    .star-rating {
        display: flex;
        gap: 5px;
        font-size: 28px;
        color: #ccc;
        cursor: pointer;
    }

        .star-rating .star.active,
        .star-rating .star.hover {
            color: #f5b301;
            transition: color 0.2s;
        }
</style>


@using (Html.BeginForm("addreview", "review", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
    <div class="row clearfix">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="card">
                <div class="body">
                    <h2 class="card-inside-title">
                        Fields with * are mandatory
                    </h2>
                    <div class="row clearfix">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Rating</label>
                                <div class="star-rating">
                                    @for (int i = 1; i <= 5; i++)
                                    {
                                        <span class="star" data-value="@i">&#9733;</span>
                                    }
                                    <input type="hidden" id="Rating" name="Rating" value="@(Model?.Rating ?? 0)" />
                                </div>
                            </div>
                            @Html.ValidationMessageFor(model => model.Rating, "", new { @class = "text-danger v-span" })
                        </div>
                    </div>


                    <div class="row clearfix">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <div class="form-line">
                                    <label> Name</label>
                                    @Html.HiddenFor(model => model.Id)
                                    @Html.HiddenFor(model => model.status)
                                    @Html.EditorFor(model => model.username, new { htmlAttributes = new { @class = "form-control" } })
                                </div>
                            </div>
                            @Html.ValidationMessageFor(model => model.username, "", new { @class = "text-danger v-span" })
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <div class="form-line">
                                    <label> Email</label>
                                    @Html.EditorFor(model => model.emailid, new { htmlAttributes = new { @class = "form-control" } })
                                </div>
                            </div>
                            @Html.ValidationMessageFor(model => model.emailid, "", new { @class = "text-danger v-span" })
                        </div>
                    </div>
                    <div class="row clearfix">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <div class="form-line">
                                    <label> Mobile No</label>

                                    @Html.EditorFor(model => model.mobileno, new { htmlAttributes = new { @class = "form-control" } })
                                </div>
                            </div>
                            @Html.ValidationMessageFor(model => model.mobileno, "", new { @class = "text-danger v-span" })
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <div class="form-line">
                                    <label> Title</label>
                                    @Html.EditorFor(model => model.title, new { htmlAttributes = new { @class = "form-control" } })
                                </div>
                            </div>
                            @Html.ValidationMessageFor(model => model.title, "", new { @class = "text-danger v-span" })
                        </div>
                    </div>
                    <div class="row clearfix">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <div class="form-line">
                                    <label> Review</label>

                                    @Html.EditorFor(model => model.reviewdesc, new { htmlAttributes = new { @class = "form-control" } })
                                </div>
                            </div>
                            @Html.ValidationMessageFor(model => model.reviewdesc, "", new { @class = "text-danger v-span" })
                        </div>
                        
                    </div>                    
                    <div class="row clearfix">
                        <div class="col-sm-12 my-lg-4 my-4">
                            <form method="post" action="/Backoffice/review/addreview" style="display: inline;">
                                <button type="submit" class="btn btn-raised btn-success waves-effect" value="Save"> @ViewBag.CreateUpdate </button>
                            </form>
                        </div>
                    </div>
                 
                </div>
            </div>
        </div>
    </div>

}

<script nonce="@Context.Items["CSPNonce"]">
    document.addEventListener("DOMContentLoaded", function () {
        const stars = document.querySelectorAll(".star-rating .star");
        const ratingInput = document.querySelector("#Rating");
        let currentRating = parseInt(ratingInput.value) || 0;

        // Highlight saved rating on load
        if (currentRating > 0) {
            stars.forEach((s, idx) => {
                if (idx < currentRating) s.classList.add("active");
            });
        }

        // Hover effect
        stars.forEach((star, index) => {
            star.addEventListener("mouseover", () => {
                stars.forEach((s, i) => s.classList.toggle("hover", i <= index));
            });
            star.addEventListener("mouseout", () => {
                stars.forEach(s => s.classList.remove("hover"));
            });

            // Click effect
            star.addEventListener("click", () => {
                ratingInput.value = index + 1;
                stars.forEach((s, i) => s.classList.toggle("active", i <= index));
            });
        });
    });
</script>

